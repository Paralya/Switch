
scoreboard players operation #player_id switch.id = @s switch.id
clear @a[tag=!detached,predicate=switch:has_same_id]
execute at @s run function switch:modes/traitors_game/death/drop_inventory

scoreboard players set #success switch.data 0
execute if predicate switch:chance/0.5 run scoreboard players set #success switch.data 1

execute as @a[tag=!detached] at @s run playsound entity.lightning_bolt.impact ambient @s ~ ~ ~ 1 0.2

execute if score #sc_silencieux switch.data matches 1 if predicate switch:chance/0.5 run scoreboard players set @s switch.temp.role 0

# Add stolen message
data modify storage switch:temp stolen set value ""
execute if entity @s[tag=switch.floupy] run data modify storage switch:temp stolen set value " (flouped)"

# Add solitaire message
data modify storage switch:temp solitaire set value ""
execute if entity @s[tag=switch.solitaire] run data modify storage switch:temp stolen set value " (solitaire)"

execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=0}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était "},{"text":"UWUWUWUWU","color":"gray","obfuscated":true},{"text":" !"}]
execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=2}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était un "},{"text":"Innocent","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"nbt":"solitaire","storage":"switch:temp","interpret":false,"color":"dark_aqua"},{"text":" !"}]
execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=1}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était l'"},{"text":"Inspecteur","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" !"}]
execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=3..4}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était le "},{"text":"Ninja","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"nbt":"solitaire","storage":"switch:temp","interpret":false,"color":"dark_aqua"},{"text":" !"}]
execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=5}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était un "},{"text":"Traitre","color":"red"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" !"}]
execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=6}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était le "},{"text":"Gros Traitre","color":"dark_red"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" !"}]
execute if score #success switch.data matches 0 if entity @s[scores={switch.temp.role=7}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, il était le "},{"text":"Floupy","color":"yellow"},{"text":" !"}]

execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=0}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était un "},{"text":"UWUWUWUWU","color":"gray","obfuscated":true},{"text":" !"}]
execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=2}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était un "},{"text":"Innocent","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"nbt":"solitaire","storage":"switch:temp","interpret":false,"color":"dark_aqua"},{"text":" !"}]
execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=1}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était l'"},{"text":"Inspecteur","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" !"}]
execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=3..4}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était le "},{"text":"Ninja","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"nbt":"solitaire","storage":"switch:temp","interpret":false,"color":"dark_aqua"},{"text":" !"}]
execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=5}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était un "},{"text":"Traitre","color":"red"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" !"}]
execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=6}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était le "},{"text":"Gros Traitre","color":"dark_red"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" !"}]
execute if score #success switch.data matches 1 if entity @s[scores={switch.temp.role=7}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mort, c'était le "},{"text":"Floupy","color":"yellow"},{"text":" !"}]

execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=0}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"UWUWUWUWU","color":"gray","obfuscated":true},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" fût son rôle..."}]
execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=2}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"Innocent","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"nbt":"solitaire","storage":"switch:temp","interpret":false,"color":"dark_aqua"},{"text":" fût son rôle..."}]
execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=1}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"Inspecteur","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" fût son rôle..."}]
execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=3..4}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"Ninja","color":"green"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"nbt":"solitaire","storage":"switch:temp","interpret":false,"color":"dark_aqua"},{"text":" fût son rôle..."}]
execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=5}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"Traitre","color":"red"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" fût son rôle..."}]
execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=6}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"Gros Traitre","color":"dark_red"},{"nbt":"stolen","storage":"switch:temp","interpret":false,"color":"yellow"},{"text":" fût son rôle..."}]
execute if score #success switch.data matches 2 if entity @s[scores={switch.temp.role=7}] run tellraw @a[tag=!detached] ["",{"nbt":"Paralya","storage":"switch:main","interpret":true},{"text":" Le joueur "},{"nbt":"data.Name","entity":"@s"},{"text":" est mouru, "},{"text":"Floupy","color":"yellow"},{"text":" fût son rôle..."}]

kill @s
execute unless score #sc_silencieux switch.data matches 1 run function switch:modes/traitors_game/update_sidebar

