
#> switch:engine/add_win
#
# @executed	as @a[tag=!detached,scores={switch.alive=1..},team=switch.temp.civil] & at @s
#
# @within	switch:modes/beat_the_kings/detect_end [ as @a[tag=!detached,scores={switch.alive=1..},team=switch.temp.civil] & at @s ]
#			switch:modes/beat_the_kings/detect_end [ at @s ]
#			switch:modes/block_party/process_end [ as @a[tag=!detached,gamemode=!spectator] & at @s ]
#			switch:modes/boat_race/process_end [ as @a[tag=!detached,scores={switch.alive=-1}] & at @s ]
#			switch:modes/bombardement/process_end [ as @a[tag=!detached,gamemode=!spectator] & at @s ]
#			switch:modes/build_battle/rating_time/end_calculation [ as @a[scores={switch.temp.rank=1}] & at @s ]
#			switch:modes/capture_the_flag/process_end [ as @a[tag=!detached,team=switch.temp.red] & at @s ]
#			switch:modes/capture_the_flag/process_end [ as @a[tag=!detached,team=switch.temp.blue] & at @s ]
#			switch:modes/castagne/process_end [ as @a[tag=!detached,gamemode=survival] & at @s ]
#			switch:modes/cigogne/process_end [ as @a[tag=!detached,gamemode=survival] & at @s ]
#			switch:modes/coin_chaser/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/creeper_apocalypse/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/de_a_coudre/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/feed_fast/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/fireblast/process_end [ as @a[tag=!detached,gamemode=adventure] & at @s ]
#			switch:modes/fish_fight/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/fish_fight/teams_tp/only_one_winner [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/gay_shooter/detect_end [ as @a[tag=!detached,gamemode=adventure,team=switch.temp.gays] & at @s ]
#			switch:modes/gay_shooter/detect_end [ as @a[tag=!detached,gamemode=adventure,team=switch.temp.shooters] & at @s ]
#			switch:modes/glassrunner/end/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/infected/process_end [ as @a[tag=!detached,team=switch.temp.human] & at @s ]
#			switch:modes/infected/process_end [ at @s ]
#			switch:modes/kart_racer/process_end [ as @a[tag=!detached,scores={switch.alive=2}] & at @s ]
#			switch:modes/laser_game/process_end [ as @a[tag=!detached,scores={switch.alive=11}] & at @s ]
#			switch:modes/laser_game/process_end [ as @a[tag=!detached,scores={switch.alive=10}] & at @s ]
#			switch:modes/layers_2_teams/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.red] & at @s ]
#			switch:modes/layers_2_teams/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.blue] & at @s ]
#			switch:modes/layers_4_teams/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.red] & at @s ]
#			switch:modes/layers_4_teams/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.blue] & at @s ]
#			switch:modes/layers_4_teams/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.green] & at @s ]
#			switch:modes/layers_4_teams/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.yellow] & at @s ]
#			switch:modes/memory_mine/process_end [ as @a[tag=!detached,gamemode=adventure] & at @s ]
#			switch:modes/minigolf/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/mlg_a_coudre/process_end [ as @a[tag=!detached,scores={switch.temp.lives=1..}] & at @s ]
#			switch:modes/moutron/process_end [ as @a[tag=!detached,gamemode=!spectator] & at @s ]
#			switch:modes/murder_mystery/detect_end [ as @a[tag=!detached,gamemode=!spectator,scores={switch.temp.role=1..2}] & at @s ]
#			switch:modes/murder_mystery/detect_end [ as @a[tag=!detached,gamemode=!spectator,scores={switch.temp.role=3}] & at @s ]
#			switch:modes/one_shot/process_end [ as @a[tag=!detached,scores={switch.temp.kills=30..}] & at @s ]
#			switch:modes/panic_chase/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.mouse] & at @s ]
#			switch:modes/panic_chase/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.hunter] & at @s ]
#			switch:modes/pillars_of_fortune/process_end [ as @a[tag=!detached,gamemode=survival] & at @s ]
#			switch:modes/pitch_creep/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/pitchout/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/protect_the_king/detect_end [ at @s ]
#			switch:modes/protect_the_king/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.red] & at @s ]
#			switch:modes/protect_the_king/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.blue] & at @s ]
#			switch:modes/pvpswap/process_end [ as @a[tag=!detached,gamemode=survival] & at @s ]
#			switch:modes/race/process_end [ as @a[tag=!detached,scores={switch.alive=2}] & at @s ]
#			switch:modes/replicate_the_build/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#			switch:modes/rush_the_flag/process_end [ at @s ]
#			switch:modes/rush_the_point/process_end [ at @s ]
#			switch:modes/sheepwars/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.red] & at @s ]
#			switch:modes/sheepwars/detect_end [ as @a[tag=!detached,gamemode=!spectator,team=switch.temp.blue] & at @s ]
#			switch:modes/shoot_da_sheep/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/simultaneous_jump/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/snowball_painter/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/spectres_game/detect_end [ as @a[tag=!detached,scores={switch.alive=1..},team=switch.temp.visible] & at @s ]
#			switch:modes/spectres_game/detect_end [ as @a[tag=!detached,scores={switch.alive=1..},team=switch.temp.spectre] & at @s ]
#			switch:modes/spectres_game/detect_end [ as @a[tag=!detached,scores={switch.temp.spectror=1},team=switch.temp.spectre] & at @s ]
#			switch:modes/spleef/process_end [ as @a[tag=!detached,gamemode=survival] & at @s ]
#			switch:modes/thunder_spear/process_end [ as @a[tag=!...] & at @s ]
#			switch:modes/tnt_run/process_end [ as @a[tag=!detached,gamemode=adventure] & at @s ]
#			switch:modes/traitors_game/detect_end [ as @a[tag=!detached,scores={switch.alive=1..,switch.temp.role=..4}] & at @s ]
#			switch:modes/traitors_game/detect_end [ as @a[tag=!...,scores={switch.alive=1..,switch.temp.role=5}] & at @s ]
#			switch:modes/traitors_game/detect_end [ as @a[tag=!detached,scores={switch.alive=1..,switch.temp.role=6}] & at @s ]
#			switch:modes/traitors_game/detect_end [ as @a[tag=!...,scores={switch.alive=1..}] & at @s ]
#			switch:modes/traitors_game/detect_end [ as @a[scores={switch.alive=1..,switch.temp.role=..4}] & at @s ]
#			switch:modes/warden_escape/process_end [ as @a[tag=!detached,scores={switch.alive=1..}] & at @s ]
#

execute if score #test_mode switch.data matches 1.. run return 1

scoreboard players add @s switch.win_streak 6
execute if score @s switch.win_streak matches 5.. unless score #test_mode switch.data matches 1 run advancement grant @s only switch:visible/30
scoreboard players add @s switch.stats.wins 1
execute unless score #test_mode switch.data matches 1 run advancement grant @s only switch:visible/4
function switch:engine/add_win_macro with storage switch:main
function switch:engine/add_money

