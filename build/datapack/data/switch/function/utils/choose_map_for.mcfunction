
#> switch:utils/choose_map_for
#
# @within	switch:modes/beat_the_kings/start {id:"beat_the_kings", maps:["traitor_original","mushroom_plains","dark_forest_hills","zonweeb_highschool","hider_mansion","nuketown_no_barrier"]}
#			switch:modes/block_party/start {id:"block_party", maps:["block_party"]}
#			switch:modes/boat_race/start {id:"boat_race", maps:["boat_race_1","boat_race_2"]}
#			switch:modes/bombardement/start {id:"bombardement", maps:["bombardement"]}
#			switch:modes/build_battle/start {id:"build_battle", maps:["build_battle"]}
#			switch:modes/capture_the_flag/choose_map_for {id:"capture_the_flag", maps:["operation_pigclaw","ctf_plains_castles","ctf_mountains_castles","ctf_flowers","ctf_nether","ctf_forest_castles"]}
#			switch:modes/castagne/start {id:"castagne", maps:["kart_racer_relai","nuketown_no_barrier","sky_island_tower","floating_island","paralya_lobby","jn_nature_box","adraik_big_ball"]}
#			switch:modes/cigogne/start {id:"cigogne", maps:["cigogne"]}
#			switch:modes/coin_chaser/start {id:"coin_chaser", maps:["paralya_lobby","smithed_summit_2024"]}
#			switch:modes/creeper_apocalypse/start {id:"creeper_apocalypse", maps:["enchanting_island","friends_pvpbox_hills","friends_cube_lobby","zonweeb_main"]}
#			switch:modes/de_a_coudre/start {id:"de_a_coudre", maps:["de_a_coudre_1"]}
#			switch:modes/feed_fast/start {id:"feed_fast", maps:["mushroom_plains","friends_pvpbox_ice","friends_pvpbox_hills","friends_pvpbox_end","kart_racer_relai","nature_house"]}
#			switch:modes/fireblast/start {id:"fireblast", maps:["fireblast_bubulle","fireblast_cookie","fireblast_pork"]}
#			switch:modes/fish_fight/start {id:"fish_fight", maps:["luxio_fish_fight"]}
#			switch:modes/gay_shooter/start {id:"gay_shooter", maps:["gay_shooter"]}
#			switch:modes/glassrunner/start {id:"glassrunner", maps:["glassrunner"]}
#			switch:modes/infected/start {id:"infected", maps:["area_51","ancienne_egypte_2013","old_japan_apocalypse","lost_graveyard_remastered"]}
#			switch:modes/kart_racer/start {id:"kart_racer", maps:["bowser_castle","snow_travel","mario_circuit","plains_routine","sakura_land","hills_land","airship_fortress","dk_mountain","clock_circuit"]}
#			switch:modes/laser_game/start {id:"laser_game", maps:["laser_game"]}
#			switch:modes/layers_2_teams/start {id:"layers_2_teams", maps:["layers_2_teams"]}
#			switch:modes/layers_4_teams/start {id:"layers_4_teams", maps:["layers_4_teams"]}
#			switch:modes/memory_mine/start {id:"memory_mine", maps:["memory_mine"]}
#			switch:modes/minigolf/start {id:"minigolf", maps:["gg_grass_1","gg_grass_2","gg_grass_3","gg_snow_1","gg_snow_2","gg_ice_1","gg_temple","gg_volcano","gg_desert_1","gg_end_1","gg_chamber"]}
#			switch:modes/mlg_a_coudre/start {id:"mlg_a_coudre", maps:["mlg_a_coudre_1"]}
#			switch:modes/moutron/start {id:"moutron", maps:["whity_lab","the_four_elements","arti_ancient_city"]}
#			switch:modes/murder_mystery/start {id:"murder_mystery", maps:["ghost_town","remelta_cluedo","jn_murder_mystery","charly_murder_2018","cluedo_casino","cluedo_camping"]}
#			switch:modes/one_shot/start {id:"one_shot", maps:["friends_pvpbox_hills","jn_one_in_the_chamber_1","jn_one_in_the_chamber_2"]}
#			switch:modes/panic_chase/start {id:"panic_chase", maps:["arti_box","nether_storm","yeti_in_panic"]}
#			switch:modes/pillars_of_fortune/start {id:"pillars_of_fortune", maps:["pillars_of_fortune", "slimy_ground", "eternal_void", "floor_is_lava", "leather_boots", "ocean_waste", "void_desert"]}
#			switch:modes/pitch_creep/start {id:"pitch_creep", maps:["pitch_creep_1","octogone_nether_ice"]}
#			switch:modes/pitchout/start {id:"pitchout", maps:["pitchout_1","pitchout_halloween"]}
#			switch:modes/protect_the_king/start {id:"protect_the_king", maps:["traitor_original","mushroom_plains","baby_park","snow_travel","cathedrale_liege","jayl_dark_forest","operation_pigclaw","dark_forest_hills","paralya_lobby_noel","zonweeb_highschool","hider_mansion","nuketown_no_barrier","lightium_spawn","paralya_lobby","stardust_spawn","stardust_boss_zone","stardust_boss_zone_nether","stardust_pvp_zone","jn_biomes_relief"]}
#			switch:modes/pvpswap/start {id:"pvpswap", maps:["kart_racer_relai","nuketown_no_barrier","sky_island_tower","floating_island","paralya_lobby","jn_nature_box"]}
#			switch:modes/race/start {id:"race", maps:["bowser_castle","snow_travel","mario_circuit","plains_routine","sakura_land","hills_land","airship_fortress","dk_mountain","clock_circuit"]}
#			switch:modes/rush_the_point/start_common {id:"rush_the_point", maps:["rush_the_point_1"]}
#			switch:modes/sheepwars/start {id:"sheepwars", maps:["sheepwars_dirigeables","survival_boat","sheepwars_bonbons","sheepwars_plateforme","sheepwars_ilots","sheepwars_colored_sheeps"]}
#			switch:modes/shoot_da_sheep/start {id:"shoot_da_sheep", maps:["shoot_da_sheep"]}
#			switch:modes/simultaneous_jump/start {id:"simultaneous_jump", maps:["de_a_coudre_1","mlg_a_coudre_1"]}
#			switch:modes/snowball_painter/start {id:"snowball_painter", maps:["snowball_painter"]}
#			switch:modes/spectres_game/start {id:"spectres_game", maps:["spectre_original","mushroom_plains","sky_island_tower","floating_island","jn_sakura_pvpbox","luxium_spectres_remake","old_japan","cluedo_camping","la_juste_recette","torg_arena"]}
#			switch:modes/spleef/start {id:"spleef", maps:["spleef_1"]}
#			switch:modes/thunder_spear/start {id:"thunder_spear", maps:["adraik_big_ball","vilarles_castillo","zonweeb_highschool","stardust_pvp_zone","sudoku_craft","smithed_summit_2024"]}
#			switch:modes/tnt_run/start {id:"tnt_run", maps:["tnt_run_futuristic","arti_tnt_run_tower","elza_dual_biomes"]}
#			switch:modes/traitors_game/start {id:"traitors_game", maps:["traitor_original","mushroom_plains","trials_run","hider_mansion","bancalvivor_s4","stardust_pvp_zone","la_fromagerie"]}
#			switch:modes/warden_escape/start {id:"warden_escape", maps:["warden_forest","cathedrale_liege","new_grounds","warden_escape_statue"]}
#

## Vérification de la liste des maps
# Détection du nombre restant de maps à charger
scoreboard players set #mc switch.data 0
$execute store result score #mc switch.data run data get storage switch:maps choose_from.$(id)

# Si il n'y a plus de maps à charger, ajouter les maps à la liste des maps à charger
$execute if score #mc switch.data matches 0 run data modify storage switch:maps choose_from.$(id) set value $(maps)

## Chargement de la map
# Passage en paramètre de la liste des maps à charger
$data modify storage switch:temp maps_to_choose set from storage switch:maps choose_from.$(id)

# Fonction de chargement de la map
function switch:maps/load

## Suppression de la map chargée de la liste des maps à charger
# Passage en paramètre de la liste des maps à charger
$data modify storage switch:main copy set from storage switch:maps choose_from.$(id)

# Suppression de la map chargée de la liste des maps à charger
function switch:maps/storage_map_list/remove_from_storage

# Application de la nouvelle liste des maps à charger
$data modify storage switch:maps choose_from.$(id) set from storage switch:main new

